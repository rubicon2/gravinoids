(()=>{"use strict";var t={28:(t,e,n)=>{n.d(e,{Z:()=>a});var i=n(81),o=n.n(i),r=n(645),s=n.n(r)()(o());s.push([t.id,":root {\r\n    box-sizing: border-box;\r\n}\r\n\r\n*, *:before, *:after {\r\n    box-sizing: inherit;\r\n}\r\n\r\nbody {\r\n    width: 100vw;\r\n    height: 100vh;\r\n    margin: 0;\r\n    padding: 0;\r\n    background-color: rgb(0, 10, 23);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n#renderCanvas {\r\n    width: inherit;\r\n    height: inherit;\r\n}",""]);const a=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var u=0;u<t.length;u++){var c=[].concat(t[u]);i&&s[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),e.push(c))}},e}},81:t=>{t.exports=function(t){return t[1]}},89:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var i=n(379),o=n.n(i),r=n(795),s=n.n(r),a=n(569),l=n.n(a),u=n(565),c=n.n(u),h=n(216),p=n.n(h),d=n(589),y=n.n(d),f=n(28),v={};v.styleTagTransform=y(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=p(),o()(f.Z,v);const g=f.Z&&f.Z.locals?f.Z.locals:void 0},379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},s=[],a=0;a<t.length;a++){var l=t[a],u=i.base?l[0]+i.base:l[0],c=r[u]||0,h="".concat(u," ").concat(c);r[u]=c+1;var p=n(h),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(d);else{var y=o(d,i);i.byIndex=a,e.splice(a,0,{identifier:h,updater:y,references:1})}s.push(h)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=n(r[s]);e[a].references--}for(var l=i(t,o),u=0;u<r.length;u++){var c=n(r[u]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}r=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,exports:{}};return t[i](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0,(()=>{const t=function(t,e,n){return Math.max(Math.min(n,e),t)},e=function(t,e){return t*=e=Math.pow(10,e),(t=Math.round(t))/e},i=function(t,e,n){let i=function(t,e,n){return(n-t)/(e-t)}(t,e,n);return i=(1+i%1)%1,function(t,e,n){return t+(e-t)*n}(t,e,i)},o=function(t,e,n){return Math.round(i(t,e,n))},r=function(t,e){return{x:t,y:e}},s=r(0,0),a=r(1,1),l=r(0,-1),u=(r(0,1),r(-1,0),r(1,0),function(t,e){return r(t.x+e.x,t.y+e.y)}),c=function(t,e){return r(t.x*e,t.y*e)},h=function(t){let e=p(t);return r(t.x/e,t.y/e)},p=function(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))},d=function(t,e){let n=Math.cos(y(e)),i=Math.sin(y(e));return r(n*t.x+-i*t.y,i*t.x+n*t.y)},y=function(t){return t*Math.PI/180},f={};function v(t,e){f[t]&&f[t].forEach((t=>{t(e)}))}let g=null,m=null,w=s,_=window.devicePixelRatio,b=[];class S{constructor(t,e,n){this.renderOrder=t,this.name=e,this.isVisible=n}}let x={background:new S(0,"background",!0),game:new S(1,"game",!0),ui:new S(2,"ui",!0),debug:new S(3,"debug",!0)};class I{constructor(t,e,n=x.game,i=!0){this.transform=t,this.content=e,this.layer=n,this.isVisible=i}}class k{constructor(t){this.polygons=t}scaled(t){let e=[];for(let n of this.polygons)e.push(n.scaled(t));return new k(e)}}class T{constructor(t,e){this.vertexArray=t,this.color=e}scaled(t){let e=[];for(let n of this.vertexArray){let i=r(n.x*t.x,n.y*t.y);e.push(i)}return new T(e,this.color)}}const A=function(t){b.includes(t)||b.push(t),v("onAddToRenderList",t),v("onRenderListChange",b)},M=function(t){let e=t.content;null!=e.text?function(t){let e=t.transform,n=t.content,i="empty string";i="function"==typeof n.text?n.text():n.text,m.save(),m.translate(e.v2_position.x,e.v2_position.y),m.rotate(y(e.n_rotation)),m.strokeStyle=null!=n.strokeStyle?n.strokeStyle:"white",m.fillStyle=null!=n.fillStyle?n.fillStyle:"white",m.font=null!=n.font?n.font:"24px Arial",m.fillText(`${i}`,0,0),m.restore()}(t):null!=e.mesh?function(t){let e=t.transform,n=t.content.mesh;m.save(),m.translate(e.v2_position.x,e.v2_position.y),m.rotate(y(e.n_rotation));let i=n.scaled(e.v2_scale);function o(t){let e=t.vertexArray,n=e[0];m.fillStyle=t.color,m.beginPath(),m.moveTo(n.x*_,n.y*_);for(let t=1;t<e.length;t++)n=e[t],m.lineTo(n.x*_,n.y*_);m.closePath(),m.fill()}for(let t of i.polygons)o(t);m.restore()}(t):(console.error("RenderItem has no valid content to render."),console.error((new Error).stack))};class E{static boundInputs=new Map;static bindingGroups=new Map;static addBindingGroup(t,e,n){this.bindingGroups.has(t)?console.warn(`Attempted to overwrite binding group ${t}`):(this.bindingGroups.set(t,{isActive:e,inputSequences:n}),n.forEach((e=>{e.getAllInputKeys().forEach((e=>{this.boundInputs.has(e)?console.warn(`Attempted to overwrite ${e}`):this.boundInputs.set(e,t)}))})))}static createBoundInputKey(t,e){return`${t} ${e}`}static#t(t){let e=this.boundInputs.get(this.createBoundInputKey(t.type,t.code));return this.bindingGroups.get(e)}static handleKeyDown(t){if(this.boundInputs.has(this.createBoundInputKey(t.type,t.code)))for(let e of this.#t(t).inputSequences)e.handleInput(t)}static handleKeyUp(t){if(this.boundInputs.has(this.createBoundInputKey(t.type,t.code)))for(let e of this.#t(t).inputSequences)e.handleInput(t)}}class K{#e=null;#n=0;#i=new Set;#o=null;#r=0;#s=null;#a=null;constructor(t,e=null){this.inputs=t,this.onInputBreak=e}handleInput(t){let e=t.code,n=t.type;if(this.#e=this.inputs[this.#n],this.#e.type===n)this.#e.codeSet.has(e)?this.#l(e):this.inputs[0].type===n&&this.inputs[0].codeSet.has(e)&&(this.#n=0,this.#i.clear(),this.#l(e));else if("hold"===this.#e.type)switch(n){case"keydown":this.#e.codeSet.has(e)&&this.#l(e);break;case"keyup":this.#i.has(e)&&this.#i.delete(e)}"keyup"===n&&this.#s?.codeSet.has(e)&&this.#u(e)}#l(t){this.#i.add(t),"hold"===this.#e.type?this.#e.codeSet.size===this.#i.size&&(this.#s=this.#e,this.#r=o(0,this.inputs.length,this.#n+1),this.#c()):this.#e.codeSet.size===this.#i.size?this.#c():setTimeout((()=>this.#i.delete(t)),20)}#u(t){clearInterval(this.#a),this.#i=new Set(this.#s.codeSet),this.#i.delete(t),this.#s=null,this.#n=0,this.#r=0}#c(){this.#e.action?.(),"hold"!==this.#e.type?this.#h(this.#e.timeout):(null!=this.#e.action&&(this.#a=setInterval(this.#e.action,100)),console.log(E.repeatingActions)),this.#n>=this.inputs.length-1&&clearTimeout(this.#o),this.#n=o(this.#r,this.inputs.length,this.#n+1),this.#i.clear()}#h(t){clearTimeout(this.#o),this.#o=setTimeout(this.#p.bind(this),t)}#p(){this.onInputBreak&&this.onInputBreak(),this.#n=this.#r}getAllInputKeys(){let t=[];return this.inputs.forEach((e=>{e.codeSet.forEach((n=>{"hold"!=e.type?t.push(E.createBoundInputKey(e.type,n)):(t.push(E.createBoundInputKey("keydown",n)),t.push(E.createBoundInputKey("keyup",n)))}))})),t}}class P{constructor(t,e="keydown",n=null,i=600){this.codeSet=new Set(t),this.type=e,this.action=n,this.timeout=i}}class ${static list=[];transform=void 0;v2_velocity=s;n_rotationSpeed=0;v2_acceleration=s;mass=0;bounciness=0;collisionEnabled=!0;constructor(t,e){this.transform=t,this.collisionEnabled=e,$.list.push(this)}update(){this.v2_velocity=u(this.v2_velocity,this.v2_acceleration),this.transform.v2_localPosition=u(this.transform.v2_position,this.v2_velocity),this.transform.n_localRotation=i(0,360,this.transform.n_rotation+this.n_rotationSpeed)}}class B{static list=[];t_parent=null;v2_localPosition=s;n_localRotation=0;v2_scale=a;freeze_rotation=!1;constructor(t,e,n,i){this.v2_localPosition=t,this.n_localRotation=e,this.v2_localScale=n,this.t_parent=i,B.list.push(this)}get v2_position(){return null!=this.t_parent?this.freeze_rotation?u(this.t_parent.v2_position,this.v2_localPosition):u(this.t_parent.v2_position,d(this.v2_localPosition,this.t_parent.n_rotation)):this.v2_localPosition}get n_rotation(){return null==this.t_parent||this.freeze_rotation?this.n_localRotation:this.t_parent.n_rotation+this.n_localRotation}get forward(){return d(l,this.n_rotation)}}class R{static list=[];color=void 0;mesh=void 0;keybindings=void 0;n_accelerationSpeed=.2;n_turningSpeed=.25;n_maxVelocity=10;n_maxAngularVelocity=6;constructor(t,e,n,i,o){this.t=new B(r(e,n),0,a),this.rb=new $(this.t,!0),this.color=t,this.mesh=i,this.keys=o,this.initialiseInput(),R.list.push(this)}initialiseInput(){let t=`player_${R.list.length}`;E.addBindingGroup(t,!0,[new K([new P([this.keys.left],"hold",this.turn.bind(this,-this.n_turningSpeed))]),new K([new P([this.keys.right],"hold",this.turn.bind(this,this.n_turningSpeed))]),new K([new P([this.keys.up],"hold",this.accelerate.bind(this,this.n_accelerationSpeed))]),new K([new P([this.keys.down],"hold",this.decelerate.bind(this,this.n_accelerationSpeed))]),new K([new P([this.keys.left,this.keys.right],"hold",(()=>this.rb.n_rotationSpeed*=.9))]),new K([new P([this.keys.up,this.keys.down],"hold",(()=>this.rb.v2_velocity=c(this.rb.v2_velocity,.9)))])])}accelerate(t){this.rb.v2_velocity=u(this.rb.v2_velocity,d(r(0,-t),this.t.n_rotation)),p(this.rb.v2_velocity)>this.n_maxVelocity&&(this.rb.v2_velocity=c(h(this.rb.v2_velocity),this.n_maxVelocity))}decelerate(t){this.rb.v2_velocity=u(this.rb.v2_velocity,d(r(0,t),this.t.n_rotation)),p(this.rb.v2_velocity)>this.n_maxVelocity&&(this.rb.v2_velocity=c(h(this.rb.v2_velocity),this.n_maxVelocity))}turn(e){this.rb.n_rotationSpeed=t(-this.n_maxAngularVelocity,this.n_maxAngularVelocity,this.rb.n_rotationSpeed+=e)}}n(89);let V=[{up:"KeyW",left:"KeyA",down:"KeyS",right:"KeyD",action:"KeyE"},{up:"ArrowUp",left:"ArrowLeft",down:"ArrowDown",right:"ArrowRight",action:"ShiftRight"}],C=[new k([new T([r(-12,12),r(0,-24),r(12,12),r(0,0)],"yellow")]),new k([new T([r(-12,12),r(0,-24),r(12,12),r(0,0)],"red"),new T([r(-12,12),r(0,-5),r(12,12),r(0,0)],"orange")])];function N(e,n,i,o){return{r:t(0,255,e),g:t(0,255,n),b:t(0,255,i),a:t(0,1,o),toString:()=>`rgba(${e}, ${n}, ${i}, ${o})`}}function z(t){let n=new B(r(50,-42.5),0,a,t.t);n.freeze_rotation=!0;let i=new I(new B(s,0,a,n),{text:()=>`x: ${Math.round(t.t.v2_position.x)}, y: ${Math.round(t.t.v2_position.y)}`},x.debug),o=new I(new B(r(0,25),0,a,n),{text:()=>`vx: ${e(t.rb.v2_velocity.x,2)}, vy: ${e(t.rb.v2_velocity.y,2)}`},x.debug),l=new I(new B(r(0,50),0,a,n),{text:()=>`r: ${Math.round(t.t.n_rotation)}`},x.debug),u=new I(new B(r(0,75),0,a,n),{text:()=>`rs: ${e(t.rb.n_rotationSpeed,2)}`},x.debug);A(i),A(o),A(l),A(u)}g=document.createElement("canvas"),g.id="renderCanvas",document.querySelector("body").appendChild(g),m=g.getContext("2d"),w=r(g.clientWidth/2,g.clientHeight/2),function(t,e,n){g.style.width=e+"px",g.style.height=n+"px",g.width=e*t,g.height=n*t,m.scale(t,t)}(_,g.clientWidth,g.clientHeight),function(t){let e=w;switch(t=Math.min(t,4)){case 4:new R(N(0,255,0,1),.5*e.x,.5*e.y,C[1],V[3]);case 3:new R(N(0,0,255,1),1.5*e.x,1.5*e.y,C[0],V[2]);case 2:new R(N(255,0,0,1),1.5*e.x,.5*e.y,C[1],V[1]);default:new R(N(255,0,255,1),.5*e.x,1.5*e.y,C[0],V[0])}}(2),requestAnimationFrame((function t(){v("onTickStart"),function(){let t=r(g.clientWidth,g.clientHeight);for(let e of $.list)e.update(),e.transform.v2_localPosition=r(i(0,t.x,e.transform.v2_position.x),i(0,t.y,e.transform.v2_position.y))}(),function(){let t=b.filter((function(t){return t.layer.isVisible&&t.isVisible}));t.sort((function(t,e){return t.layer.renderOrder>e.layer.renderOrder})),m.clearRect(0,0,g.clientWidth,g.clientHeight);for(let e of t)M(e)}(),requestAnimationFrame(t),v("onTickEnd")})),window.addEventListener("keydown",(function(t){t.repeat||E.handleKeyDown(t)})),window.addEventListener("keyup",(function(t){E.handleKeyUp(t)})),A(new I(R.list[0].t,{mesh:R.list[0].mesh})),A(new I(R.list[1].t,{mesh:R.list[1].mesh})),z(R.list[0]),z(R.list[1]),E.addBindingGroup("cheats",!0,[new K([new P(["Numpad8"]),new P(["Numpad2"]),new P(["Numpad4"]),new P(["Numpad6"]),new P(["NumpadEnter"],"keydown",(()=>x.debug.isVisible=!x.debug.isVisible))])])})()})();